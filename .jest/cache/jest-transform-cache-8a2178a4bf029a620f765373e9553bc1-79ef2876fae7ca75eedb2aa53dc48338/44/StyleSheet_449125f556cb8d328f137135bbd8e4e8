be83ad511f5c4eebb2f92feee2de3131
'use strict';

var ReactNativeStyleAttributes = require('../Components/View/ReactNativeStyleAttributes');
var PixelRatio = require('../Utilities/PixelRatio').default;
var flatten = require('./flattenStyle');
var hairlineWidth = PixelRatio.roundToNearestPixel(0.4);
if (hairlineWidth === 0) {
  hairlineWidth = 1 / PixelRatio.get();
}
var absoluteFill = {
  position: 'absolute',
  left: 0,
  right: 0,
  top: 0,
  bottom: 0
};
if (__DEV__) {
  Object.freeze(absoluteFill);
}
module.exports = {
  hairlineWidth: hairlineWidth,
  absoluteFill: absoluteFill,
  absoluteFillObject: absoluteFill,
  compose: function compose(style1, style2) {
    if (style1 != null && style2 != null) {
      return [style1, style2];
    } else {
      return style1 != null ? style1 : style2;
    }
  },
  flatten: flatten,
  setStyleAttributePreprocessor: function setStyleAttributePreprocessor(property, process) {
    var _ReactNativeStyleAttr, _ReactNativeStyleAttr2;
    var value;
    if (ReactNativeStyleAttributes[property] === true) {
      value = {
        process: process
      };
    } else if (typeof ReactNativeStyleAttributes[property] === 'object') {
      value = Object.assign({}, ReactNativeStyleAttributes[property], {
        process: process
      });
    } else {
      console.error(`${property} is not a valid style attribute`);
      return;
    }
    if (__DEV__ && typeof value.process === 'function' && typeof ((_ReactNativeStyleAttr = ReactNativeStyleAttributes[property]) == null ? void 0 : _ReactNativeStyleAttr.process) === 'function' && value.process !== ((_ReactNativeStyleAttr2 = ReactNativeStyleAttributes[property]) == null ? void 0 : _ReactNativeStyleAttr2.process)) {
      console.warn(`Overwriting ${property} style attribute preprocessor`);
    }
    ReactNativeStyleAttributes[property] = value;
  },
  create: function create(obj) {
    if (__DEV__) {
      for (var _key in obj) {
        if (obj[_key]) {
          Object.freeze(obj[_key]);
        }
      }
    }
    return obj;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlcyIsInJlcXVpcmUiLCJQaXhlbFJhdGlvIiwiZGVmYXVsdCIsImZsYXR0ZW4iLCJoYWlybGluZVdpZHRoIiwicm91bmRUb05lYXJlc3RQaXhlbCIsImdldCIsImFic29sdXRlRmlsbCIsInBvc2l0aW9uIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiX19ERVZfXyIsIk9iamVjdCIsImZyZWV6ZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJhYnNvbHV0ZUZpbGxPYmplY3QiLCJjb21wb3NlIiwic3R5bGUxIiwic3R5bGUyIiwic2V0U3R5bGVBdHRyaWJ1dGVQcmVwcm9jZXNzb3IiLCJwcm9wZXJ0eSIsInByb2Nlc3MiLCJfUmVhY3ROYXRpdmVTdHlsZUF0dHIiLCJfUmVhY3ROYXRpdmVTdHlsZUF0dHIyIiwidmFsdWUiLCJhc3NpZ24iLCJjb25zb2xlIiwiZXJyb3IiLCJ3YXJuIiwiY3JlYXRlIiwib2JqIiwia2V5Il0sInNvdXJjZXMiOlsiU3R5bGVTaGVldC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtcbiAgX19fX0NvbG9yVmFsdWVfSW50ZXJuYWwsXG4gIF9fX19EYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlX0ludGVybmFsLFxuICBfX19fRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZVByb3BfSW50ZXJuYWwsXG4gIF9fX19JbWFnZVN0eWxlX0ludGVybmFsLFxuICBfX19fSW1hZ2VTdHlsZVByb3BfSW50ZXJuYWwsXG4gIF9fX19TdHlsZXNfSW50ZXJuYWwsXG4gIF9fX19UZXh0U3R5bGVfSW50ZXJuYWwsXG4gIF9fX19UZXh0U3R5bGVQcm9wX0ludGVybmFsLFxuICBfX19fVmlld1N0eWxlX0ludGVybmFsLFxuICBfX19fVmlld1N0eWxlUHJvcF9JbnRlcm5hbCxcbn0gZnJvbSAnLi9TdHlsZVNoZWV0VHlwZXMnO1xuXG5jb25zdCBSZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlcyA9IHJlcXVpcmUoJy4uL0NvbXBvbmVudHMvVmlldy9SZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlcycpO1xuY29uc3QgUGl4ZWxSYXRpbyA9IHJlcXVpcmUoJy4uL1V0aWxpdGllcy9QaXhlbFJhdGlvJykuZGVmYXVsdDtcbmNvbnN0IGZsYXR0ZW4gPSByZXF1aXJlKCcuL2ZsYXR0ZW5TdHlsZScpO1xuXG4vKipcbiAqIFRoaXMgdHlwZSBzaG91bGQgYmUgdXNlZCBhcyB0aGUgdHlwZSBmb3IgYW55dGhpbmcgdGhhdCBpcyBhIGNvbG9yLiBJdCBpc1xuICogbW9zdCB1c2VmdWwgd2hlbiB1c2luZyBEeW5hbWljQ29sb3JJT1Mgd2hpY2ggY2FuIGJlIGEgc3RyaW5nIG9yIGEgZHluYW1pY1xuICogY29sb3Igb2JqZWN0LlxuICpcbiAqIHR5cGUgcHJvcHMgPSB7YmFja2dyb3VuZENvbG9yOiBDb2xvclZhbHVlfTtcbiAqL1xuZXhwb3J0IHR5cGUgQ29sb3JWYWx1ZSA9IF9fX19Db2xvclZhbHVlX0ludGVybmFsO1xuXG4vKipcbiAqIFRoaXMgdHlwZSBzaG91bGQgYmUgdXNlZCBhcyB0aGUgdHlwZSBmb3IgYSBwcm9wIHRoYXQgaXMgcGFzc2VkIHRocm91Z2hcbiAqIHRvIGEgPFZpZXc+J3MgYHN0eWxlYCBwcm9wLiBUaGlzIGVuc3VyZXMgY2FsbCBzaXRlcyBvZiB0aGUgY29tcG9uZW50XG4gKiBjYW4ndCBwYXNzIHN0eWxlcyB0aGF0IFZpZXcgZG9lc24ndCBzdXBwb3J0IHN1Y2ggYXMgYGZvbnRTaXplYC5gXG4gKlxuICogdHlwZSBQcm9wcyA9IHtzdHlsZTogVmlld1N0eWxlUHJvcH1cbiAqIGNvbnN0IE15Q29tcG9uZW50ID0gKHByb3BzOiBQcm9wcykgPT4gPFZpZXcgc3R5bGU9e3Byb3BzLnN0eWxlfSAvPlxuICovXG5leHBvcnQgdHlwZSBWaWV3U3R5bGVQcm9wID0gX19fX1ZpZXdTdHlsZVByb3BfSW50ZXJuYWw7XG5cbi8qKlxuICogVGhpcyB0eXBlIHNob3VsZCBiZSB1c2VkIGFzIHRoZSB0eXBlIGZvciBhIHByb3AgdGhhdCBpcyBwYXNzZWQgdGhyb3VnaFxuICogdG8gYSA8VGV4dD4ncyBgc3R5bGVgIHByb3AuIFRoaXMgZW5zdXJlcyBjYWxsIHNpdGVzIG9mIHRoZSBjb21wb25lbnRcbiAqIGNhbid0IHBhc3Mgc3R5bGVzIHRoYXQgVGV4dCBkb2Vzbid0IHN1cHBvcnQgc3VjaCBhcyBgcmVzaXplTW9kZWAuYFxuICpcbiAqIHR5cGUgUHJvcHMgPSB7c3R5bGU6IFRleHRTdHlsZVByb3B9XG4gKiBjb25zdCBNeUNvbXBvbmVudCA9IChwcm9wczogUHJvcHMpID0+IDxUZXh0IHN0eWxlPXtwcm9wcy5zdHlsZX0gLz5cbiAqL1xuZXhwb3J0IHR5cGUgVGV4dFN0eWxlUHJvcCA9IF9fX19UZXh0U3R5bGVQcm9wX0ludGVybmFsO1xuXG4vKipcbiAqIFRoaXMgdHlwZSBzaG91bGQgYmUgdXNlZCBhcyB0aGUgdHlwZSBmb3IgYSBwcm9wIHRoYXQgaXMgcGFzc2VkIHRocm91Z2hcbiAqIHRvIGFuIDxJbWFnZT4ncyBgc3R5bGVgIHByb3AuIFRoaXMgZW5zdXJlcyBjYWxsIHNpdGVzIG9mIHRoZSBjb21wb25lbnRcbiAqIGNhbid0IHBhc3Mgc3R5bGVzIHRoYXQgSW1hZ2UgZG9lc24ndCBzdXBwb3J0IHN1Y2ggYXMgYGZvbnRTaXplYC5gXG4gKlxuICogdHlwZSBQcm9wcyA9IHtzdHlsZTogSW1hZ2VTdHlsZVByb3B9XG4gKiBjb25zdCBNeUNvbXBvbmVudCA9IChwcm9wczogUHJvcHMpID0+IDxJbWFnZSBzdHlsZT17cHJvcHMuc3R5bGV9IC8+XG4gKi9cbmV4cG9ydCB0eXBlIEltYWdlU3R5bGVQcm9wID0gX19fX0ltYWdlU3R5bGVQcm9wX0ludGVybmFsO1xuXG4vKipcbiAqIFdBUk5JTkc6IFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgYmUgdXNpbmcgdGhpcyB0eXBlLiBUaGlzIHR5cGVcbiAqIGlzIHNpbWlsYXIgdG8gdGhlIG9uZXMgYWJvdmUgZXhjZXB0IGl0IGFsbG93cyBzdHlsZXMgdGhhdCBhcmUgYWNjZXB0ZWRcbiAqIGJ5IGFsbCBvZiBWaWV3LCBUZXh0LCBvciBJbWFnZS4gSXQgaXMgdGhlcmVmb3JlIHZlcnkgdW5zYWZlIHRvIHBhc3MgdGhpc1xuICogdGhyb3VnaCB0byBhbiB1bmRlcmx5aW5nIGNvbXBvbmVudC4gVXNpbmcgdGhpcyBpcyBhbG1vc3QgYWx3YXlzIGEgbWlzdGFrZVxuICogYW5kIHVzaW5nIG9uZSBvZiB0aGUgb3RoZXIgbW9yZSByZXN0cmljdGl2ZSB0eXBlcyBpcyBsaWtlbHkgdGhlIHJpZ2h0IGNob2ljZS5cbiAqL1xuZXhwb3J0IHR5cGUgRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZVByb3AgPVxuICBfX19fRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZVByb3BfSW50ZXJuYWw7XG5cbi8qKlxuICogVXRpbGl0eSB0eXBlIGZvciBnZXR0aW5nIHRoZSB2YWx1ZXMgZm9yIHNwZWNpZmljIHN0eWxlIGtleXMuXG4gKlxuICogVGhlIGZvbGxvd2luZyBpcyBiYWQgYmVjYXVzZSBwb3NpdGlvbiBpcyBtb3JlIHJlc3RyaWN0aXZlIHRoYW4gJ3N0cmluZyc6XG4gKiBgYGBcbiAqIHR5cGUgUHJvcHMgPSB7cG9zaXRpb246IHN0cmluZ307XG4gKiBgYGBcbiAqXG4gKiBZb3Ugc2hvdWxkIHVzZSB0aGUgZm9sbG93aW5nIGluc3RlYWQ6XG4gKlxuICogYGBgXG4gKiB0eXBlIFByb3BzID0ge3Bvc2l0aW9uOiBUeXBlRm9yU3R5bGVLZXk8J3Bvc2l0aW9uJz59O1xuICogYGBgXG4gKlxuICogVGhpcyB3aWxsIGNvcnJlY3RseSBnaXZlIHlvdSB0aGUgdHlwZSAnYWJzb2x1dGUnIHwgJ3JlbGF0aXZlJ1xuICovXG5leHBvcnQgdHlwZSBUeXBlRm9yU3R5bGVLZXk8XG4gICtrZXk6ICRLZXlzPF9fX19EYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlX0ludGVybmFsPixcbj4gPSAkRWxlbWVudFR5cGU8X19fX0Rhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGVfSW50ZXJuYWwsIGtleT47XG5cbi8qKlxuICogVGhpcyB0eXBlIGlzIGFuIG9iamVjdCBvZiB0aGUgZGlmZmVyZW50IHBvc3NpYmxlIHN0eWxlXG4gKiBwcm9wZXJ0aWVzIHRoYXQgY2FuIGJlIHNwZWNpZmllZCBmb3IgVmlldy5cbiAqXG4gKiBOb3RlIHRoYXQgdGhpcyBpc24ndCBhIHNhZmUgd2F5IHRvIHR5cGUgYSBzdHlsZSBwcm9wIGZvciBhIGNvbXBvbmVudCBhc1xuICogcmVzdWx0cyBmcm9tIFN0eWxlU2hlZXQuY3JlYXRlIHJldHVybiBhbiBpbnRlcm5hbCBpZGVudGlmaWVyLCBub3RcbiAqIGFuIG9iamVjdCBvZiBzdHlsZXMuXG4gKlxuICogSWYgeW91IHdhbnQgdG8gdHlwZSB0aGUgc3R5bGUgcHJvcCBvZiBhIGZ1bmN0aW9uLFxuICogY29uc2lkZXIgdXNpbmcgVmlld1N0eWxlUHJvcC5cbiAqXG4gKiBBIHJlYXNvbmFibGUgdXNhZ2Ugb2YgdGhpcyB0eXBlIGlzIGZvciBoZWxwZXIgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIGFuXG4gKiBvYmplY3Qgb2Ygc3R5bGVzIHRvIHBhc3MgdG8gYSBWaWV3IHRoYXQgY2FuJ3QgYmUgcHJlY29tcHV0ZWQgd2l0aFxuICogU3R5bGVTaGVldC5jcmVhdGUuXG4gKi9cbmV4cG9ydCB0eXBlIFZpZXdTdHlsZSA9IF9fX19WaWV3U3R5bGVfSW50ZXJuYWw7XG5cbi8qKlxuICogVGhpcyB0eXBlIGlzIGFuIG9iamVjdCBvZiB0aGUgZGlmZmVyZW50IHBvc3NpYmxlIHN0eWxlXG4gKiBwcm9wZXJ0aWVzIHRoYXQgY2FuIGJlIHNwZWNpZmllZCBmb3IgVGV4dC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhpcyBpc24ndCBhIHNhZmUgd2F5IHRvIHR5cGUgYSBzdHlsZSBwcm9wIGZvciBhIGNvbXBvbmVudCBhc1xuICogcmVzdWx0cyBmcm9tIFN0eWxlU2hlZXQuY3JlYXRlIHJldHVybiBhbiBpbnRlcm5hbCBpZGVudGlmaWVyLCBub3RcbiAqIGFuIG9iamVjdCBvZiBzdHlsZXMuXG4gKlxuICogSWYgeW91IHdhbnQgdG8gdHlwZSB0aGUgc3R5bGUgcHJvcCBvZiBhIGZ1bmN0aW9uLFxuICogY29uc2lkZXIgdXNpbmcgVGV4dFN0eWxlUHJvcC5cbiAqXG4gKiBBIHJlYXNvbmFibGUgdXNhZ2Ugb2YgdGhpcyB0eXBlIGlzIGZvciBoZWxwZXIgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIGFuXG4gKiBvYmplY3Qgb2Ygc3R5bGVzIHRvIHBhc3MgdG8gYSBUZXh0IHRoYXQgY2FuJ3QgYmUgcHJlY29tcHV0ZWQgd2l0aFxuICogU3R5bGVTaGVldC5jcmVhdGUuXG4gKi9cbmV4cG9ydCB0eXBlIFRleHRTdHlsZSA9IF9fX19UZXh0U3R5bGVfSW50ZXJuYWw7XG5cbi8qKlxuICogVGhpcyB0eXBlIGlzIGFuIG9iamVjdCBvZiB0aGUgZGlmZmVyZW50IHBvc3NpYmxlIHN0eWxlXG4gKiBwcm9wZXJ0aWVzIHRoYXQgY2FuIGJlIHNwZWNpZmllZCBmb3IgSW1hZ2UuXG4gKlxuICogTm90ZSB0aGF0IHRoaXMgaXNuJ3QgYSBzYWZlIHdheSB0byB0eXBlIGEgc3R5bGUgcHJvcCBmb3IgYSBjb21wb25lbnQgYXNcbiAqIHJlc3VsdHMgZnJvbSBTdHlsZVNoZWV0LmNyZWF0ZSByZXR1cm4gYW4gaW50ZXJuYWwgaWRlbnRpZmllciwgbm90XG4gKiBhbiBvYmplY3Qgb2Ygc3R5bGVzLlxuICpcbiAqIElmIHlvdSB3YW50IHRvIHR5cGUgdGhlIHN0eWxlIHByb3Agb2YgYSBmdW5jdGlvbixcbiAqIGNvbnNpZGVyIHVzaW5nIEltYWdlU3R5bGVQcm9wLlxuICpcbiAqIEEgcmVhc29uYWJsZSB1c2FnZSBvZiB0aGlzIHR5cGUgaXMgZm9yIGhlbHBlciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gYW5cbiAqIG9iamVjdCBvZiBzdHlsZXMgdG8gcGFzcyB0byBhbiBJbWFnZSB0aGF0IGNhbid0IGJlIHByZWNvbXB1dGVkIHdpdGhcbiAqIFN0eWxlU2hlZXQuY3JlYXRlLlxuICovXG5leHBvcnQgdHlwZSBJbWFnZVN0eWxlID0gX19fX0ltYWdlU3R5bGVfSW50ZXJuYWw7XG5cbi8qKlxuICogV0FSTklORzogWW91IHByb2JhYmx5IHNob3VsZG4ndCBiZSB1c2luZyB0aGlzIHR5cGUuIFRoaXMgdHlwZSBpcyBhbiBvYmplY3RcbiAqIHdpdGggYWxsIHBvc3NpYmxlIHN0eWxlIGtleXMgYW5kIHRoZWlyIHZhbHVlcy4gTm90ZSB0aGF0IHRoaXMgaXNuJ3RcbiAqIGEgc2FmZSB3YXkgdG8gdHlwZSBhIHN0eWxlIHByb3AgZm9yIGEgY29tcG9uZW50IGFzIHJlc3VsdHMgZnJvbVxuICogU3R5bGVTaGVldC5jcmVhdGUgcmV0dXJuIGFuIGludGVybmFsIGlkZW50aWZpZXIsIG5vdCBhbiBvYmplY3Qgb2Ygc3R5bGVzLlxuICpcbiAqIElmIHlvdSB3YW50IHRvIHR5cGUgdGhlIHN0eWxlIHByb3Agb2YgYSBmdW5jdGlvbiwgY29uc2lkZXIgdXNpbmdcbiAqIFZpZXdTdHlsZVByb3AsIFRleHRTdHlsZVByb3AsIG9yIEltYWdlU3R5bGVQcm9wLlxuICpcbiAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBieSB2ZXJ5IGNvcmUgdXRpbGl0aWVzIHRoYXQgb3BlcmF0ZSBvbiBhbiBvYmplY3RcbiAqIGNvbnRhaW5pbmcgYW55IHBvc3NpYmxlIHN0eWxlIHZhbHVlLlxuICovXG5leHBvcnQgdHlwZSBEYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlID0gX19fX0Rhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGVfSW50ZXJuYWw7XG5cbmxldCBoYWlybGluZVdpZHRoOiBudW1iZXIgPSBQaXhlbFJhdGlvLnJvdW5kVG9OZWFyZXN0UGl4ZWwoMC40KTtcbmlmIChoYWlybGluZVdpZHRoID09PSAwKSB7XG4gIGhhaXJsaW5lV2lkdGggPSAxIC8gUGl4ZWxSYXRpby5nZXQoKTtcbn1cblxuY29uc3QgYWJzb2x1dGVGaWxsID0ge1xuICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgbGVmdDogMCxcbiAgcmlnaHQ6IDAsXG4gIHRvcDogMCxcbiAgYm90dG9tOiAwLFxufTtcbmlmIChfX0RFVl9fKSB7XG4gIE9iamVjdC5mcmVlemUoYWJzb2x1dGVGaWxsKTtcbn1cblxuLyoqXG4gKiBBIFN0eWxlU2hlZXQgaXMgYW4gYWJzdHJhY3Rpb24gc2ltaWxhciB0byBDU1MgU3R5bGVTaGVldHNcbiAqXG4gKiBDcmVhdGUgYSBuZXcgU3R5bGVTaGVldDpcbiAqXG4gKiBgYGBcbiAqIGNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAqICAgY29udGFpbmVyOiB7XG4gKiAgICAgYm9yZGVyUmFkaXVzOiA0LFxuICogICAgIGJvcmRlcldpZHRoOiAwLjUsXG4gKiAgICAgYm9yZGVyQ29sb3I6ICcjZDZkN2RhJyxcbiAqICAgfSxcbiAqICAgdGl0bGU6IHtcbiAqICAgICBmb250U2l6ZTogMTksXG4gKiAgICAgZm9udFdlaWdodDogJ2JvbGQnLFxuICogICB9LFxuICogICBhY3RpdmVUaXRsZToge1xuICogICAgIGNvbG9yOiAncmVkJyxcbiAqICAgfSxcbiAqIH0pO1xuICogYGBgXG4gKlxuICogVXNlIGEgU3R5bGVTaGVldDpcbiAqXG4gKiBgYGBcbiAqIDxWaWV3IHN0eWxlPXtzdHlsZXMuY29udGFpbmVyfT5cbiAqICAgPFRleHQgc3R5bGU9e1tzdHlsZXMudGl0bGUsIHRoaXMucHJvcHMuaXNBY3RpdmUgJiYgc3R5bGVzLmFjdGl2ZVRpdGxlXX0gLz5cbiAqIDwvVmlldz5cbiAqIGBgYFxuICpcbiAqIENvZGUgcXVhbGl0eTpcbiAqXG4gKiAgLSBCeSBtb3Zpbmcgc3R5bGVzIGF3YXkgZnJvbSB0aGUgcmVuZGVyIGZ1bmN0aW9uLCB5b3UncmUgbWFraW5nIHRoZSBjb2RlXG4gKiAgZWFzaWVyIHRvIHVuZGVyc3RhbmQuXG4gKiAgLSBOYW1pbmcgdGhlIHN0eWxlcyBpcyBhIGdvb2Qgd2F5IHRvIGFkZCBtZWFuaW5nIHRvIHRoZSBsb3cgbGV2ZWwgY29tcG9uZW50c1xuICogIGluIHRoZSByZW5kZXIgZnVuY3Rpb24uXG4gKlxuICogUGVyZm9ybWFuY2U6XG4gKlxuICogIC0gTWFraW5nIGEgc3R5bGVzaGVldCBmcm9tIGEgc3R5bGUgb2JqZWN0IG1ha2VzIGl0IHBvc3NpYmxlIHRvIHJlZmVyIHRvIGl0XG4gKiBieSBJRCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgbmV3IHN0eWxlIG9iamVjdCBldmVyeSB0aW1lLlxuICogIC0gSXQgYWxzbyBhbGxvd3MgdG8gc2VuZCB0aGUgc3R5bGUgb25seSBvbmNlIHRocm91Z2ggdGhlIGJyaWRnZS4gQWxsXG4gKiBzdWJzZXF1ZW50IHVzZXMgYXJlIGdvaW5nIHRvIHJlZmVyIGFuIGlkIChub3QgaW1wbGVtZW50ZWQgeWV0KS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8qKlxuICAgKiBUaGlzIGlzIGRlZmluZWQgYXMgdGhlIHdpZHRoIG9mIGEgdGhpbiBsaW5lIG9uIHRoZSBwbGF0Zm9ybS4gSXQgY2FuIGJlXG4gICAqIHVzZWQgYXMgdGhlIHRoaWNrbmVzcyBvZiBhIGJvcmRlciBvciBkaXZpc2lvbiBiZXR3ZWVuIHR3byBlbGVtZW50cy5cbiAgICogRXhhbXBsZTpcbiAgICogYGBgXG4gICAqICAge1xuICAgKiAgICAgYm9yZGVyQm90dG9tQ29sb3I6ICcjYmJiJyxcbiAgICogICAgIGJvcmRlckJvdHRvbVdpZHRoOiBTdHlsZVNoZWV0LmhhaXJsaW5lV2lkdGhcbiAgICogICB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBUaGlzIGNvbnN0YW50IHdpbGwgYWx3YXlzIGJlIGEgcm91bmQgbnVtYmVyIG9mIHBpeGVscyAoc28gYSBsaW5lIGRlZmluZWRcbiAgICogYnkgaXQgbG9vayBjcmlzcCkgYW5kIHdpbGwgdHJ5IHRvIG1hdGNoIHRoZSBzdGFuZGFyZCB3aWR0aCBvZiBhIHRoaW4gbGluZVxuICAgKiBvbiB0aGUgdW5kZXJseWluZyBwbGF0Zm9ybS4gSG93ZXZlciwgeW91IHNob3VsZCBub3QgcmVseSBvbiBpdCBiZWluZyBhXG4gICAqIGNvbnN0YW50IHNpemUsIGJlY2F1c2Ugb24gZGlmZmVyZW50IHBsYXRmb3JtcyBhbmQgc2NyZWVuIGRlbnNpdGllcyBpdHNcbiAgICogdmFsdWUgbWF5IGJlIGNhbGN1bGF0ZWQgZGlmZmVyZW50bHkuXG4gICAqXG4gICAqIEEgbGluZSB3aXRoIGhhaXJsaW5lIHdpZHRoIG1heSBub3QgYmUgdmlzaWJsZSBpZiB5b3VyIHNpbXVsYXRvciBpcyBkb3duc2NhbGVkLlxuICAgKi9cbiAgaGFpcmxpbmVXaWR0aCxcblxuICAvKipcbiAgICogQSB2ZXJ5IGNvbW1vbiBwYXR0ZXJuIGlzIHRvIGNyZWF0ZSBvdmVybGF5cyB3aXRoIHBvc2l0aW9uIGFic29sdXRlIGFuZCB6ZXJvIHBvc2l0aW9uaW5nLFxuICAgKiBzbyBgYWJzb2x1dGVGaWxsYCBjYW4gYmUgdXNlZCBmb3IgY29udmVuaWVuY2UgYW5kIHRvIHJlZHVjZSBkdXBsaWNhdGlvbiBvZiB0aGVzZSByZXBlYXRlZFxuICAgKiBzdHlsZXMuXG4gICAqL1xuICBhYnNvbHV0ZUZpbGw6IChhYnNvbHV0ZUZpbGw6IGFueSksIC8vIFRPRE86IFRoaXMgc2hvdWxkIGJlIHVwZGF0ZWQgYWZ0ZXIgd2UgZml4IGRvd25zdHJlYW0gRmxvdyBzaXRlcy5cblxuICAvKipcbiAgICogU29tZXRpbWVzIHlvdSBtYXkgd2FudCBgYWJzb2x1dGVGaWxsYCBidXQgd2l0aCBhIGNvdXBsZSB0d2Vha3MgLSBgYWJzb2x1dGVGaWxsT2JqZWN0YCBjYW4gYmVcbiAgICogdXNlZCB0byBjcmVhdGUgYSBjdXN0b21pemVkIGVudHJ5IGluIGEgYFN0eWxlU2hlZXRgLCBlLmcuOlxuICAgKlxuICAgKiAgIGNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgICogICAgIHdyYXBwZXI6IHtcbiAgICogICAgICAgLi4uU3R5bGVTaGVldC5hYnNvbHV0ZUZpbGxPYmplY3QsXG4gICAqICAgICAgIHRvcDogMTAsXG4gICAqICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICogICAgIH0sXG4gICAqICAgfSk7XG4gICAqL1xuICBhYnNvbHV0ZUZpbGxPYmplY3Q6IGFic29sdXRlRmlsbCxcblxuICAvKipcbiAgICogQ29tYmluZXMgdHdvIHN0eWxlcyBzdWNoIHRoYXQgYHN0eWxlMmAgd2lsbCBvdmVycmlkZSBhbnkgc3R5bGVzIGluIGBzdHlsZTFgLlxuICAgKiBJZiBlaXRoZXIgc3R5bGUgaXMgZmFsc3ksIHRoZSBvdGhlciBvbmUgaXMgcmV0dXJuZWQgd2l0aG91dCBhbGxvY2F0aW5nIGFuXG4gICAqIGFycmF5LCBzYXZpbmcgYWxsb2NhdGlvbnMgYW5kIG1haW50YWluaW5nIHJlZmVyZW5jZSBlcXVhbGl0eSBmb3JcbiAgICogUHVyZUNvbXBvbmVudCBjaGVja3MuXG4gICAqL1xuICBjb21wb3NlPFQ6IERhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGVQcm9wPihcbiAgICBzdHlsZTE6ID9ULFxuICAgIHN0eWxlMjogP1QsXG4gICk6ID9UIHwgJFJlYWRPbmx5QXJyYXk8VD4ge1xuICAgIGlmIChzdHlsZTEgIT0gbnVsbCAmJiBzdHlsZTIgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIChbc3R5bGUxLCBzdHlsZTJdOiAkUmVhZE9ubHlBcnJheTxUPik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzdHlsZTEgIT0gbnVsbCA/IHN0eWxlMSA6IHN0eWxlMjtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZsYXR0ZW5zIGFuIGFycmF5IG9mIHN0eWxlIG9iamVjdHMsIGludG8gb25lIGFnZ3JlZ2F0ZWQgc3R5bGUgb2JqZWN0LlxuICAgKiBBbHRlcm5hdGl2ZWx5LCB0aGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byBsb29rdXAgSURzLCByZXR1cm5lZCBieVxuICAgKiBTdHlsZVNoZWV0LnJlZ2lzdGVyLlxuICAgKlxuICAgKiA+ICoqTk9URSoqOiBFeGVyY2lzZSBjYXV0aW9uIGFzIGFidXNpbmcgdGhpcyBjYW4gdGF4IHlvdSBpbiB0ZXJtcyBvZlxuICAgKiA+IG9wdGltaXphdGlvbnMuXG4gICAqID5cbiAgICogPiBJRHMgZW5hYmxlIG9wdGltaXphdGlvbnMgdGhyb3VnaCB0aGUgYnJpZGdlIGFuZCBtZW1vcnkgaW4gZ2VuZXJhbC4gUmVmZXJyaW5nXG4gICAqID4gdG8gc3R5bGUgb2JqZWN0cyBkaXJlY3RseSB3aWxsIGRlcHJpdmUgeW91IG9mIHRoZXNlIG9wdGltaXphdGlvbnMuXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqIGBgYFxuICAgKiBjb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gICAqICAgbGlzdEl0ZW06IHtcbiAgICogICAgIGZsZXg6IDEsXG4gICAqICAgICBmb250U2l6ZTogMTYsXG4gICAqICAgICBjb2xvcjogJ3doaXRlJ1xuICAgKiAgIH0sXG4gICAqICAgc2VsZWN0ZWRMaXN0SXRlbToge1xuICAgKiAgICAgY29sb3I6ICdncmVlbidcbiAgICogICB9XG4gICAqIH0pO1xuICAgKlxuICAgKiBTdHlsZVNoZWV0LmZsYXR0ZW4oW3N0eWxlcy5saXN0SXRlbSwgc3R5bGVzLnNlbGVjdGVkTGlzdEl0ZW1dKVxuICAgKiAvLyByZXR1cm5zIHsgZmxleDogMSwgZm9udFNpemU6IDE2LCBjb2xvcjogJ2dyZWVuJyB9XG4gICAqIGBgYFxuICAgKiBBbHRlcm5hdGl2ZSB1c2U6XG4gICAqIGBgYFxuICAgKiBTdHlsZVNoZWV0LmZsYXR0ZW4oc3R5bGVzLmxpc3RJdGVtKTtcbiAgICogLy8gcmV0dXJuIHsgZmxleDogMSwgZm9udFNpemU6IDE2LCBjb2xvcjogJ3doaXRlJyB9XG4gICAqIC8vIFNpbXBseSBzdHlsZXMubGlzdEl0ZW0gd291bGQgcmV0dXJuIGl0cyBJRCAobnVtYmVyKVxuICAgKiBgYGBcbiAgICogVGhpcyBtZXRob2QgaW50ZXJuYWxseSB1c2VzIGBTdHlsZVNoZWV0UmVnaXN0cnkuZ2V0U3R5bGVCeUlEKHN0eWxlKWBcbiAgICogdG8gcmVzb2x2ZSBzdHlsZSBvYmplY3RzIHJlcHJlc2VudGVkIGJ5IElEcy4gVGh1cywgYW4gYXJyYXkgb2Ygc3R5bGVcbiAgICogb2JqZWN0cyAoaW5zdGFuY2VzIG9mIFN0eWxlU2hlZXQuY3JlYXRlKSwgYXJlIGluZGl2aWR1YWxseSByZXNvbHZlZCB0byxcbiAgICogdGhlaXIgcmVzcGVjdGl2ZSBvYmplY3RzLCBtZXJnZWQgYXMgb25lIGFuZCB0aGVuIHJldHVybmVkLiBUaGlzIGFsc28gZXhwbGFpbnNcbiAgICogdGhlIGFsdGVybmF0aXZlIHVzZS5cbiAgICovXG4gIGZsYXR0ZW4sXG5cbiAgLyoqXG4gICAqIFdBUk5JTkc6IEVYUEVSSU1FTlRBTC4gQnJlYWtpbmcgY2hhbmdlcyB3aWxsIHByb2JhYmx5IGhhcHBlbiBhIGxvdCBhbmQgd2lsbFxuICAgKiBub3QgYmUgcmVsaWFibHkgYW5ub3VuY2VkLiBUaGUgd2hvbGUgdGhpbmcgbWlnaHQgYmUgZGVsZXRlZCwgd2hvIGtub3dzPyBVc2VcbiAgICogYXQgeW91ciBvd24gcmlzay5cbiAgICpcbiAgICogU2V0cyBhIGZ1bmN0aW9uIHRvIHVzZSB0byBwcmUtcHJvY2VzcyBhIHN0eWxlIHByb3BlcnR5IHZhbHVlLiBUaGlzIGlzIHVzZWRcbiAgICogaW50ZXJuYWxseSB0byBwcm9jZXNzIGNvbG9yIGFuZCB0cmFuc2Zvcm0gdmFsdWVzLiBZb3Ugc2hvdWxkIG5vdCB1c2UgdGhpc1xuICAgKiB1bmxlc3MgeW91IHJlYWxseSBrbm93IHdoYXQgeW91IGFyZSBkb2luZyBhbmQgaGF2ZSBleGhhdXN0ZWQgb3RoZXIgb3B0aW9ucy5cbiAgICovXG4gIHNldFN0eWxlQXR0cmlidXRlUHJlcHJvY2Vzc29yKFxuICAgIHByb3BlcnR5OiBzdHJpbmcsXG4gICAgcHJvY2VzczogKG5leHRQcm9wOiBtaXhlZCkgPT4gbWl4ZWQsXG4gICkge1xuICAgIGxldCB2YWx1ZTtcblxuICAgIGlmIChSZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlc1twcm9wZXJ0eV0gPT09IHRydWUpIHtcbiAgICAgIHZhbHVlID0ge3Byb2Nlc3N9O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIFJlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzW3Byb3BlcnR5XSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHZhbHVlID0gey4uLlJlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzW3Byb3BlcnR5XSwgcHJvY2Vzc307XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYCR7cHJvcGVydHl9IGlzIG5vdCBhIHZhbGlkIHN0eWxlIGF0dHJpYnV0ZWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIF9fREVWX18gJiZcbiAgICAgIHR5cGVvZiB2YWx1ZS5wcm9jZXNzID09PSAnZnVuY3Rpb24nICYmXG4gICAgICB0eXBlb2YgUmVhY3ROYXRpdmVTdHlsZUF0dHJpYnV0ZXNbcHJvcGVydHldPy5wcm9jZXNzID09PSAnZnVuY3Rpb24nICYmXG4gICAgICB2YWx1ZS5wcm9jZXNzICE9PSBSZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlc1twcm9wZXJ0eV0/LnByb2Nlc3NcbiAgICApIHtcbiAgICAgIGNvbnNvbGUud2FybihgT3ZlcndyaXRpbmcgJHtwcm9wZXJ0eX0gc3R5bGUgYXR0cmlidXRlIHByZXByb2Nlc3NvcmApO1xuICAgIH1cblxuICAgIFJlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzW3Byb3BlcnR5XSA9IHZhbHVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgU3R5bGVTaGVldCBzdHlsZSByZWZlcmVuY2UgZnJvbSB0aGUgZ2l2ZW4gb2JqZWN0LlxuICAgKi9cbiAgY3JlYXRlPCtTOiBfX19fU3R5bGVzX0ludGVybmFsPihvYmo6IFMpOiAkUmVhZE9ubHk8Uz4ge1xuICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIHJldHVybiBTIGFzIHRoZSByZXR1cm4gdHlwZS4gQnV0IGZpcnN0LFxuICAgIC8vIHdlIG5lZWQgdG8gY29kZW1vZCBhbGwgdGhlIGNhbGxzaXRlcyB0aGF0IGFyZSB0eXBpbmcgdGhpc1xuICAgIC8vIHJldHVybiB2YWx1ZSBhcyBhIG51bWJlciAoZXZlbiB0aG91Z2ggaXQgd2FzIG9wYXF1ZSkuXG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICBpZiAob2JqW2tleV0pIHtcbiAgICAgICAgICBPYmplY3QuZnJlZXplKG9ialtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9LFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBVUEsWUFBWTs7QUFlWixJQUFNQSwwQkFBMEIsR0FBR0MsT0FBTyxDQUFDLCtDQUErQyxDQUFDO0FBQzNGLElBQU1DLFVBQVUsR0FBR0QsT0FBTyxDQUFDLHlCQUF5QixDQUFDLENBQUNFLE9BQU87QUFDN0QsSUFBTUMsT0FBTyxHQUFHSCxPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUF3SXpDLElBQUlJLGFBQXFCLEdBQUdILFVBQVUsQ0FBQ0ksbUJBQW1CLENBQUMsR0FBRyxDQUFDO0FBQy9ELElBQUlELGFBQWEsS0FBSyxDQUFDLEVBQUU7RUFDdkJBLGFBQWEsR0FBRyxDQUFDLEdBQUdILFVBQVUsQ0FBQ0ssR0FBRyxDQUFDLENBQUM7QUFDdEM7QUFFQSxJQUFNQyxZQUFZLEdBQUc7RUFDbkJDLFFBQVEsRUFBRSxVQUFVO0VBQ3BCQyxJQUFJLEVBQUUsQ0FBQztFQUNQQyxLQUFLLEVBQUUsQ0FBQztFQUNSQyxHQUFHLEVBQUUsQ0FBQztFQUNOQyxNQUFNLEVBQUU7QUFDVixDQUFDO0FBQ0QsSUFBSUMsT0FBTyxFQUFFO0VBQ1hDLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDUixZQUFZLENBQUM7QUFDN0I7QUE4Q0FTLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBb0JmYixhQUFhLEVBQWJBLGFBQWE7RUFPYkcsWUFBWSxFQUFHQSxZQUFrQjtFQWNqQ1csa0JBQWtCLEVBQUVYLFlBQVk7RUFRaENZLE9BQU8sV0FBQUEsUUFDTEMsTUFBVSxFQUNWQyxNQUFVLEVBQ2M7SUFDeEIsSUFBSUQsTUFBTSxJQUFJLElBQUksSUFBSUMsTUFBTSxJQUFJLElBQUksRUFBRTtNQUNwQyxPQUFRLENBQUNELE1BQU0sRUFBRUMsTUFBTSxDQUFDO0lBQzFCLENBQUMsTUFBTTtNQUNMLE9BQU9ELE1BQU0sSUFBSSxJQUFJLEdBQUdBLE1BQU0sR0FBR0MsTUFBTTtJQUN6QztFQUNGLENBQUM7RUF5Q0RsQixPQUFPLEVBQVBBLE9BQU87RUFXUG1CLDZCQUE2QixXQUFBQSw4QkFDM0JDLFFBQWdCLEVBQ2hCQyxPQUFtQyxFQUNuQztJQUFBLElBQUFDLHFCQUFBLEVBQUFDLHNCQUFBO0lBQ0EsSUFBSUMsS0FBSztJQUVULElBQUk1QiwwQkFBMEIsQ0FBQ3dCLFFBQVEsQ0FBQyxLQUFLLElBQUksRUFBRTtNQUNqREksS0FBSyxHQUFHO1FBQUNILE9BQU8sRUFBUEE7TUFBTyxDQUFDO0lBQ25CLENBQUMsTUFBTSxJQUFJLE9BQU96QiwwQkFBMEIsQ0FBQ3dCLFFBQVEsQ0FBQyxLQUFLLFFBQVEsRUFBRTtNQUNuRUksS0FBSyxHQUFBYixNQUFBLENBQUFjLE1BQUEsS0FBTzdCLDBCQUEwQixDQUFDd0IsUUFBUSxDQUFDO1FBQUVDLE9BQU8sRUFBUEE7TUFBTyxFQUFDO0lBQzVELENBQUMsTUFBTTtNQUNMSyxPQUFPLENBQUNDLEtBQUssQ0FBRSxHQUFFUCxRQUFTLGlDQUFnQyxDQUFDO01BQzNEO0lBQ0Y7SUFFQSxJQUNFVixPQUFPLElBQ1AsT0FBT2MsS0FBSyxDQUFDSCxPQUFPLEtBQUssVUFBVSxJQUNuQyxTQUFBQyxxQkFBQSxHQUFPMUIsMEJBQTBCLENBQUN3QixRQUFRLENBQUMscUJBQXBDRSxxQkFBQSxDQUFzQ0QsT0FBTyxNQUFLLFVBQVUsSUFDbkVHLEtBQUssQ0FBQ0gsT0FBTyxPQUFBRSxzQkFBQSxHQUFLM0IsMEJBQTBCLENBQUN3QixRQUFRLENBQUMscUJBQXBDRyxzQkFBQSxDQUFzQ0YsT0FBTyxHQUMvRDtNQUNBSyxPQUFPLENBQUNFLElBQUksQ0FBRSxlQUFjUixRQUFTLCtCQUE4QixDQUFDO0lBQ3RFO0lBRUF4QiwwQkFBMEIsQ0FBQ3dCLFFBQVEsQ0FBQyxHQUFHSSxLQUFLO0VBQzlDLENBQUM7RUFLREssTUFBTSxXQUFBQSxPQUEwQkMsR0FBTSxFQUFnQjtJQUlwRCxJQUFJcEIsT0FBTyxFQUFFO01BQ1gsS0FBSyxJQUFNcUIsSUFBRyxJQUFJRCxHQUFHLEVBQUU7UUFDckIsSUFBSUEsR0FBRyxDQUFDQyxJQUFHLENBQUMsRUFBRTtVQUNacEIsTUFBTSxDQUFDQyxNQUFNLENBQUNrQixHQUFHLENBQUNDLElBQUcsQ0FBQyxDQUFDO1FBQ3pCO01BQ0Y7SUFDRjtJQUNBLE9BQU9ELEdBQUc7RUFDWjtBQUNGLENBQUMifQ==